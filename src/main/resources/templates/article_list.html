<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="/article_list.css"/>
    <title>ListlPage</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
</head>
<body>
<!--detail-topbar-->
<div class="detail_top__bar">
    <nav class="detail_top__bar_menu">
        <div class="logo_box">
            <ul>
                <li>
                    <a href="http://localhost:8080/">
                        <button type="button" class="logo_button">
                            <img src="/img/230605_툴툴_로고 복사 1.png"/>
                        </button>
                    </a>
                </li>
            </ul>
        </div>
        <div class="main_menu">
            <ul class="main_menu_ul">
                <li>
                    <a href="http://localhost:8080/article/list">
                        <span>Review</span>
                    </a>
                </li>
                <li>
                    <a href="http://localhost:8080/market/list">
                        <span>Market</span>
                    </a>
                </li>
                <li>
                    <a href="http://localhost:8080/notice/list">
                        <span>Notice</span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="signLine">
            <div class="signIn" sec:authorize="isAuthenticated()" th:href="@{/user/logout}">
                <a href="http://localhost:8080/user/logout">
                    <button type="button" class="signIn_button">
                        <img src="https://i.postimg.cc/sDydgSfq/logout.png" class="signIn_img"/>
                        <span>로그아웃</span>
                    </button>
                </a>
            </div>

            <div class="signIn" sec:authorize="isAnonymous()" th:href="@{/user/login}">
                <a href="http://localhost:8080/user/login">
                    <button type="button" class="signIn_button">
                        <img src="https://i.postimg.cc/dQGcFnFG/login.png" class="signIn_img"/>
                        <span>로그인</span>
                    </button>
                </a>
            </div>

            <div class="signUp" sec:authorize="isAuthenticated()" th:href="@{/user/logout}">
                <a href="http://localhost:8080/mypage">
                    <button type="button" class="signUp_button">
                        <img src="https://i.postimg.cc/wMXCkx2w/mypage.png" class="signUp_img"/>
                        <span>마이페이지</span>
                    </button>
                </a>
            </div>
            <div class="signUp" sec:authorize="isAnonymous()" th:href="@{/user/login}">
                <a href="http://localhost:8080/user/signup_menual">
                    <button type="button" class="signUp_button">
                        <img src="https://i.postimg.cc/vHzRgBcB/signup.png" class="signUp_img"/>
                        <span>회원가입</span>
                    </button>
                </a>
            </div>
        </div>
    </nav>
</div>
<div class="sorting">
    <div class="total_count">
        <p>총 <span th:text="${articleCount}"></span>건</p>
    </div>
    <div class="sorting_menu">
        <ul>
            <li>
                <a href="?sort=createSort" class="Sort">
                    <span>최신순</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <span>추천순</span>
                </a>
            </li>
            <li>
                <a href="?sort=starScoreSort" class="Sort">
                    <span>평점순</span>
                </a>
            </li>
            <li>
                <a href="?sort=rowPriceSort" class="Sort">
                    <span>낮은금액별</span>
                </a>
            </li>
            <li>
                <a href="?sort=highPriceSort" class="Sort">
                    <span>높은금액별</span>
                </a>
            </li>
        </ul>
    </div>
</div>

<div class="flex_box">
    <div class="categori_accordion">
        <!--write_box-->
        <div class="write_box">
            <button type="button">
                <a th:href="@{/article/create}">
                    <img src="https://i.postimg.cc/13HmB7VP/Vector.png"/>
                    <span>글쓰기</span>
                </a>
            </button>
        </div>
        <!--search_box-->
        <div class="search_box">
            <a href="#">
                <input type="text" placeholder="검색" id="searchBox">
                <button type="button" class="search_button">
                    <img src="https://i.postimg.cc/tJ4CnLzY/Vector2.png">
                </button>
            </a>
        </div>
        <!--dotted-->
        <div class="underline"></div>
        <!--categori_accordion-->
        <div class="accordion">
            <div class="accordion-header">카테고리</div>
            <div class="accordion-content">
                <ul>
                    <li class="accordion_list">
                        <div class="accordion-header">금액범위</div>
                        <div class="accordion-content">
                            <ul class="accordion_ul">
                                <li>
                                    <button type="button"><a th:href="@{/article/under/15/sort}">0 ~ 15만원</a></button>
                                </li>
                                <li>
                                    <button type="button"><a th:href="@{/article/under/30/sort}">15만원 ~ 30만원</a>
                                    </button>
                                </li>
                                <li>
                                    <button type="button"><a th:href="@{/article/under/50/sort}">30만원 ~ 50만원</a>
                                    </button>
                                </li>
                                <li>
                                    <button type="button"><a th:href="@{/article/under/100/sort}">그 외</a></button>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="accordion_list">
                        <div class="accordion-header">계절별</div>
                        <div class="accordion-content">
                            <ul class="accordion_ul">
                                <li>
                                    <button type="button"><a th:href="@{/article/season_all/sort}">사계</a></button>
                                </li>
                                <li>
                                    <button type="button"><a th:href="@{/article/season_summer/sort}">하계</a></button>
                                </li>
                                <li>
                                    <button type="button"><a th:href="@{/article/season_winter/sort}">동계</a></button>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="accordion_list">
                        <div class="accordion-header">종류별</div>
                        <div class="accordion-content">
                            <ul class="accordion_ul">
                                <li>
                                    <button type="button"><a th:href="@{/article/type_tent/sort}">텐트/타프</a></button>
                                </li>
                                <li>
                                    <button class="button"><a th:href="@{/article/type_table/sort}">테이블</a></button>
                                </li>
                                <li>
                                    <button><a th:href="@{/article/type_chair/sort}">의자</a></button>
                                </li>
                                <li>
                                    <button type="button"><a th:href="@{/article/type_lanturn/sort}">랜턴</a></button>
                                </li>
                                <li>
                                    <button type="button"><a th:href="@{/article/type_cook/sort}">조리도구</a></button>
                                </li>
                                <li>
                                    <button type="button"><a th:href="@{/article/type_etc/sort}">기타</a></button>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="content review_board_page">
        <!--1차이미지-->
        <div class="review_board_page_1">
            <ul id="articleItem">
                <li th:each="article, stat : ${paging}" th:if="${stat.index < 9}">
                    <nav class="item review_board_img">
                        <a th:href="@{|/article/detail/${article.id}|}">
                            <img src="https://i.postimg.cc/m23RYKm6/product-box1.png" class="review_board_main_img"/>
                        </a>
                        <div class="text_box_name text_box_name_1">
                            <a th:href="@{|/article/detail/${article.id}|}" th:text="${article.subject}"></a>
                        </div>
                        <div class="review_board_text_box">
                            <span>답글수 <span th:if="${#lists.size(article.answerList) >= 0}"
                                            th:text="${#lists.size(article.answerList)}">
                                        </span></span>
                            <span>&nbsp;&nbsp;</span>
                            <span>추천수 <span th:if="${#lists.size(article.voter) >= 0}"
                                            th:text="${#lists.size(article.voter)}"></span></span>
                        </div>

                        <div class="review_board_text_box_tag">
                            <span>#</span>
                            <span th:text="${article.type}"></span>
                            <span>,</span>
                            <span>#</span>
                            <span th:text="${article.season}"></span>
                        </div>
                    </nav>
                </li>
            </ul>
        </div>
        <div class="pagination-1">
            <div class="pagination">
                <ul class="page-list">
                    <li th:classappend="${!paging.hasPrevious} ? 'disabled'">
                        <a class="page-link"
                           th:href="${paging.hasPrevious} ? @{|?page=${paging.number+1}|} : @{|?page=0|}">
                            <span>이전</span>
                        </a>
                    </li>
                    <li th:each="page: ${#numbers.sequence(0, paging.totalPages)}"
                        th:if="${page >= paging.number-3 and page <= paging.number+3}"
                        th:classappend="${page == paging.number} ? 'active'"
                        class="page-item">
                        <a th:text="${page}" class="page-link" th:href="@{|?page=${page}|}"></a>
                    </li>
                    <li th:classappend="${!paging.hasNext} ? 'disabled'">
                        <a class="page-link"
                           th:href="${paging.hasNext} ? @{|?page=${paging.number+1}|} : @{|?page=${paging.totalPages}|}">
                            <span>다음</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!--footer-->
<footer>
    <div class="footer-content">
        <p>&copy; 2023 Your Website. All rights reserved.</p>
        <nav>
            <a href="#">Home</a>
            <a href="#">About</a>
            <a href="#">Contact</a>
        </nav>
    </div>
</footer>

<script>
      $(document).ready(function () {
        $(".heart").click(function () {
          var currentSrc = $(this).attr("src");
          var newSrc = "";

          if (currentSrc === "https://i.postimg.cc/9FFnrSqh/image.png") {
            newSrc = "https://i.postimg.cc/43GKgpk2/1.png";
          } else {
            newSrc = "https://i.postimg.cc/9FFnrSqh/image.png";
          }
          $(this).attr("src", newSrc);
        });
      });

</script>
<script>
      $(document).ready(function () {
  $(".accordion-header").click(function () {
    $(this).toggleClass("active");
    $(this).next(".accordion-content").slideToggle();
  });
  // 검색 버튼 클릭 이벤트 처리
  $("#searchButton").click(function () {
    var searchText = $("#searchBox").val().toLowerCase();
    $(".accordion").hide();

    $(".accordion").each(function () {
      var headerText = $(this).find(".accordion-header").text().toLowerCase();
      var nestedHeaderText = $(this)
        .find(".nested-accordion .accordion-header")
        .text()
        .toLowerCase();

      if (
        headerText.includes(searchText) ||
        nestedHeaderText.includes(searchText)
      ) {
        $(this).show();
        $(this).find(".nested-accordion").show();
      }
    });
  });
});






</script>
<script>
      var itemsPerPage = 9;
    var $items = $('.item');
    var totalPages = Math.ceil($items.length / itemsPerPage);
    var currentPage = 1;

    function showPage(page) {
      var startIndex = (page - 1) * itemsPerPage;
      var endIndex = startIndex + itemsPerPage;

      $items.hide();
      $items.slice(startIndex, endIndex).show();

      var pageNumbers = '';
      for (var i = 1; i <= totalPages; i++) {
        if (i === page) {
          pageNumbers += '<a href="#" class="page-number active">' + i + '</a>';
        } else {
          pageNumbers += '<a href="#" class="page-number">' + i + '</a>';
        }
      }
      $('.page-numbers').html(pageNumbers);
    }

    function navigateToPreviousPage() {
      if (currentPage > 1) {
        currentPage--;
        showPage(currentPage);
      }
    }

    function navigateToNextPage() {
      if (currentPage < totalPages) {
        currentPage++;
        showPage(currentPage);
      }
    }

    $('.previous').on('click', function(e) {
      e.preventDefault();
      navigateToPreviousPage();
    });

    $('.next').on('click', function(e) {
      e.preventDefault();
      navigateToNextPage();
    });

    $(document).on('click', '.page-number', function(e) {
      e.preventDefault();
      var page = parseInt($(this).text());
      showPage(page);
    });

    showPage(currentPage);






</script>
<script>
    $(document).ready(function() {
  // .pagination-2 내의 페이지 링크 클릭 이벤트 처리
  $('.sorting_menu a.Sort').on('click', function(e) {
    e.preventDefault(); // 기본 링크 동작 방지

    var pageUrl = `listCategory${$(this).attr('href')}`; // 클릭된 링크의 URL 가져오기

<!--    location.href = pageUrl;-->
<!--    console.log(pageUrl)-->
    // 업데이트된 내용을 가져오기 위해 AJAX 요청 생성
    $.ajax({
      url: pageUrl,
      method: 'GET',
      //dataType: 'text',
      success: function(response) {
       $('#articleItem').replaceWith(response);
      },
      error: function() {
        // AJAX 요청이 실패한 경우 에러 처리
        console.log('내용을 가져오는 중에 오류가 발생했습니다.');
      }
    });
  });
});
</script>
</body>
</html>